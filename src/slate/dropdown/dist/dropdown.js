define("slate/dropdown/1.0.0/dropdown",["$"],function(a){var b=a("$");b.fn.dropdown=function(a){var c,d=b(this),e=b(document),f=d.selector||"",g="ontouchstart"in document.documentElement,h=(new Date).getTime(),i=[],j=arguments[0],k="string"==typeof j,l=[].slice.call(arguments,1);return d.each(function(){var m,n=b.isPlainObject(a)?b.extend(!0,{},b.fn.dropdown.settings,a):b.extend({},b.fn.dropdown.settings),o=n.className,p=n.metadata,q=n.namespace,r=n.selector,s=n.error,t="."+q,u="module-"+q,v=b(this),w=v.find(r.item),x=v.find(r.text),y=v.find(r.input),z=v.children(r.menu),A=this,B=v.data(u);m={initialize:function(){m.debug("Initializing dropdown",n),m.save.defaults(),m.set.selected(),g&&m.bind.touchEvents(),m.bind.mouseEvents(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of dropdown",m),B=m,v.data(u,m)},destroy:function(){m.verbose("Destroying previous dropdown for",v),w.off(t),v.off(t).removeData(u)},bind:{touchEvents:function(){m.debug("Touch device detected binding touch events"),v.on("touchstart"+t,m.event.test.toggle),w.on("touchstart"+t,m.event.item.mouseenter).on("touchstart"+t,m.event.item.click)},mouseEvents:function(){m.verbose("Mouse detected binding mouse events"),"click"==n.on?v.on("click"+t,m.event.test.toggle):"hover"==n.on?v.on("mouseenter"+t,m.delay.show).on("mouseleave"+t,m.delay.hide):v.on(n.on+t,m.toggle),w.on("mouseenter"+t,m.event.item.mouseenter).on("mouseleave"+t,m.event.item.mouseleave).on("click"+t,m.event.item.click)},intent:function(){m.verbose("Binding hide intent event to document"),g&&e.on("touchstart"+t,m.event.test.touch).on("touchmove"+t,m.event.test.touch),e.on("click"+t,m.event.test.hide)}},unbind:{intent:function(){m.verbose("Removing hide intent event from document"),g&&e.off("touchstart"+t).off("touchmove"+t),e.off("click"+t)}},event:{test:{toggle:function(a){m.determine.intent(a,m.toggle)&&a.preventDefault()},touch:function(a){m.determine.intent(a,function(){"touchstart"==a.type?m.timer=setTimeout(m.hide,n.delay.touch):"touchmove"==a.type&&clearTimeout(m.timer)}),a.stopPropagation()},hide:function(a){m.determine.intent(a,m.hide)}},item:{mouseenter:function(a){var c=b(this).find(r.submenu),d=b(this).siblings(r.item).children(r.menu);(c.length>0||d.length>0)&&(clearTimeout(m.itemTimer),m.itemTimer=setTimeout(function(){d.length>0&&m.animate.hide(!1,d.filter(":visible")),c.length>0&&(m.verbose("Showing sub-menu",c),m.animate.show(!1,c))},2*n.delay.show),a.preventDefault(),a.stopPropagation())},mouseleave:function(){var a=b(this).find(r.menu);a.size()>0&&(clearTimeout(m.itemTimer),m.itemTimer=setTimeout(function(){m.verbose("Hiding sub-menu",a),m.animate.hide(!1,a)},n.delay.hide))},click:function(a){var c=b(this),d=void 0!==c.data(p.text)?c.data(p.text):c.text(),e=void 0!==c.data(p.value)?c.data(p.value):"string"==typeof d?d.toLowerCase():d,f=function(){m.determine.selectAction(d,e),b.proxy(n.onChange,A)(e,d)};0===c.find(r.menu).size()&&("touchstart"==a.type?c.one("click",f):f())}},resetStyle:function(){b(this).removeAttr("style")}},determine:{selectAction:function(a,c){m.verbose("Determining action",n.action),b.isFunction(m.action[n.action])?(m.verbose("Triggering preset action",n.action,a,c),m.action[n.action](a,c)):b.isFunction(n.action)?(m.verbose("Triggering user action",n.action,a,c),n.action(a,c)):m.error(s.action,n.action)},intent:function(a,c){return m.debug("Determining whether event occurred in dropdown",a.target),c=c||function(){},0===b(a.target).closest(z).size()?(m.verbose("Triggering event",c),c(),!0):(m.verbose("Event occurred in dropdown, canceling callback"),!1)}},action:{nothing:function(){},hide:function(){m.hide()},activate:function(a,b){b=void 0!==b?b:a,m.set.selected(b),m.set.value(b),m.hide()},auto:function(a,b){b=void 0!==b?b:a,m.set.selected(b),m.set.value(b),m.hide()},changeText:function(a,b){b=void 0!==b?b:a,m.set.selected(b),m.hide()},updateForm:function(a,b){b=void 0!==b?b:a,m.set.selected(b),m.set.value(b),m.hide()}},get:{text:function(){return x.text()},value:function(){return y.size()>0?y.val():v.data(p.value)},item:function(a,c){var d=!1;return a=void 0!==a?a:void 0!==m.get.value()?m.get.value():m.get.text(),void 0===c&&""===a?(m.debug("Ambiguous dropdown value using strict type check",a),c=!0):c=c||!1,void 0!==a?w.each(function(){var e=b(this),f=void 0!==e.data(p.text)?e.data(p.text):e.text(),g=void 0!==e.data(p.value)?e.data(p.value):"string"==typeof f?f.toLowerCase():f;c?g===a?d=b(this):d||f!==a||(d=b(this)):g==a?d=b(this):d||f!=a||(d=b(this))}):a=m.get.text(),d||!1}},restore:{defaults:function(){m.restore.defaultText(),m.restore.defaultValue()},defaultText:function(){var a=v.data(p.defaultText);m.debug("Restoring default text",a),m.set.text(a)},defaultValue:function(){var a=v.data(p.defaultValue);void 0!==a&&(m.debug("Restoring default value",a),m.set.selected(a),m.set.value(a))}},save:{defaults:function(){m.save.defaultText(),m.save.defaultValue()},defaultValue:function(){v.data(p.defaultValue,m.get.value())},defaultText:function(){v.data(p.defaultText,x.text())}},set:{text:function(a){m.debug("Changing text",a,x),x.removeClass(o.placeholder),x.text(a)},value:function(a){m.debug("Adding selected value to hidden input",a,y),y.size()>0?y.val(a).trigger("change"):v.data(p.value,a)},active:function(){v.addClass(o.active)},visible:function(){v.addClass(o.visible)},selected:function(a){var b,c=m.get.item(a);c&&(m.debug("Setting selected menu item to",c),b=void 0!==c.data(p.text)?c.data(p.text):c.text(),w.removeClass(o.active),c.addClass(o.active),m.set.text(b))}},remove:{active:function(){v.removeClass(o.active)},visible:function(){v.removeClass(o.visible)}},is:{selection:function(){return v.hasClass(o.selection)},animated:function(a){return a?a.is(":animated")||a.transition("is animating"):z.is(":animated")||z.transition("is animating")},visible:function(a){return a?a.is(":visible"):z.is(":visible")},hidden:function(a){return a?a.is(":not(:visible)"):z.is(":not(:visible)")}},can:{click:function(){return g||"click"==n.on},show:function(){return!v.hasClass(o.disabled)}},animate:{show:function(a,c){var d=c||z;a=a||function(){},m.is.hidden(d)&&(m.verbose("Doing menu show animation",d),"none"==n.transition?a():void 0!==b.fn.transition&&v.transition("is supported")?d.transition({animation:n.transition+" in",duration:n.duration,complete:a,queue:!1}):"slide down"==n.transition?d.hide().clearQueue().children().clearQueue().css("opacity",0).delay(50).animate({opacity:1},n.duration,"easeOutQuad",m.event.resetStyle).end().slideDown(100,"easeOutQuad",function(){b.proxy(m.event.resetStyle,this)(),a()}):"fade"==n.transition?d.hide().clearQueue().fadeIn(n.duration,function(){b.proxy(m.event.resetStyle,this)(),a()}):m.error(s.transition,n.transition))},hide:function(a,c){var d=c||z;a=a||function(){},m.is.visible(d)&&(m.verbose("Doing menu hide animation",d),void 0!==b.fn.transition&&v.transition("is supported")?d.transition({animation:n.transition+" out",duration:n.duration,complete:a,queue:!1}):"none"==n.transition?a():"slide down"==n.transition?d.show().clearQueue().children().clearQueue().css("opacity",1).animate({opacity:0},100,"easeOutQuad",m.event.resetStyle).end().delay(50).slideUp(100,"easeOutQuad",function(){b.proxy(m.event.resetStyle,this)(),a()}):"fade"==n.transition?d.show().clearQueue().fadeOut(150,function(){b.proxy(m.event.resetStyle,this)(),a()}):m.error(s.transition))}},show:function(){m.debug("Checking if dropdown can show"),m.is.hidden()&&(m.hideOthers(),m.set.active(),m.animate.show(function(){m.can.click()&&m.bind.intent(),m.set.visible()}),b.proxy(n.onShow,A)())},hide:function(){!m.is.animated()&&m.is.visible()&&(m.debug("Hiding dropdown"),m.can.click()&&m.unbind.intent(),m.remove.active(),m.animate.hide(m.remove.visible),b.proxy(n.onHide,A)())},delay:{show:function(){m.verbose("Delaying show event to ensure user intent"),clearTimeout(m.timer),m.timer=setTimeout(m.show,n.delay.show)},hide:function(){m.verbose("Delaying hide event to ensure user intent"),clearTimeout(m.timer),m.timer=setTimeout(m.hide,n.delay.hide)}},hideOthers:function(){m.verbose("Finding other dropdowns to hide"),d.not(v).has(r.menu+":visible").dropdown("hide")},toggle:function(){m.verbose("Toggling menu visibility"),m.is.hidden()?m.show():m.hide()},setting:function(a,c){if(b.isPlainObject(a))b.extend(!0,n,a);else{if(void 0===c)return n[a];n[a]=c}},internal:function(a,c){if(b.isPlainObject(a))b.extend(!0,m,a);else{if(void 0===c)return m[a];m[a]=c}},debug:function(){n.debug&&(n.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,n.name+":"),m.debug.apply(console,arguments)))},verbose:function(){n.verbose&&n.debug&&(n.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,n.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,n.name+":"),m.error.apply(console,arguments)},performance:{log:function(a){var b,c,d;n.performance&&(b=(new Date).getTime(),d=h||b,c=b-d,h=b,i.push({Element:A,Name:a[0],Arguments:[].slice.call(a,1)||"","Execution Time":c})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,100)},display:function(){var a=n.name+":",c=0;h=!1,clearTimeout(m.performance.timer),b.each(i,function(a,b){c+=b["Execution Time"]}),a+=" "+c+"ms",f&&(a+=" '"+f+"'"),(void 0!==console.group||void 0!==console.table)&&i.length>0&&(console.groupCollapsed(a),console.table?console.table(i):b.each(i,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),i=[]}},invoke:function(a,d,e){var f,g,h,i=B;return d=d||l,e=A||e,"string"==typeof a&&void 0!==i&&(a=a.split(/[\. ]/),f=a.length-1,b.each(a,function(c,d){var e=c!=f?d+a[c+1].charAt(0).toUpperCase()+a[c+1].slice(1):a;if(b.isPlainObject(i[e])&&c!=f)i=i[e];else{if(void 0!==i[e])return g=i[e],!1;if(!b.isPlainObject(i[d])||c==f)return void 0!==i[d]?(g=i[d],!1):(m.error(s.method,a),!1);i=i[d]}})),b.isFunction(g)?h=g.apply(e,d):void 0!==g&&(h=g),b.isArray(c)?c.push(h):void 0!==c?c=[c,h]:void 0!==h&&(c=h),g}},k?(void 0===B&&m.initialize(),m.invoke(j)):(void 0!==B&&m.destroy(),m.initialize())}),void 0!==c?c:this},b.fn.dropdown.settings={name:"Dropdown",namespace:"dropdown",debug:!1,verbose:!0,performance:!0,on:"click",action:"activate",delay:{show:200,hide:300,touch:50},transition:"slide down",duration:250,onChange:function(){},onShow:function(){},onHide:function(){},error:{action:"You called a dropdown action that was not defined",method:"The method you called is not defined.",transition:"The requested transition was not found"},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",text:"text",value:"value"},selector:{menu:".menu",submenu:"> .menu",item:".menu > .item",text:"> .text",input:'> input[type="hidden"]'},className:{active:"active",placeholder:"default",disabled:"disabled",visible:"visible",selection:"selection"}},b.extend(b.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}})});
