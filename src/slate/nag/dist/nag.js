define("slate/nag/1.0.0/nag",["$"],function(a){var b=a("$");b.fn.nag=function(a){var c,d=b(this),e=d.selector||"",f=(new Date).getTime(),g=[],h=arguments[0],i="string"==typeof h,j=[].slice.call(arguments,1);return b(this).each(function(){var k,l,m,n,o,p,q,r,s,t=b.extend(!0,{},b.fn.nag.settings,a),u=t.className,v=t.selector,w=t.error,x=t.namespace,y="."+x,z=x+"-module",A=b(this),B=A.find(v.close),C=b(t.context),D=this,E=A.data(z),F=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,0)};s={initialize:function(){s.verbose("Initializing element"),k=A.offset(),l=A.outerHeight(),m=C.outerWidth(),n=C.outerHeight(),o=C.offset(),A.data(z,s),B.on("click"+y,s.dismiss),t.context==window&&"fixed"==t.position&&A.addClass(u.fixed),t.sticky&&(s.verbose("Adding scroll events"),"absolute"==t.position?C.on("scroll"+y,s.event.scroll).on("resize"+y,s.event.scroll):b(window).on("scroll"+y,s.event.scroll).on("resize"+y,s.event.scroll),b.proxy(s.event.scroll,this)()),t.displayTime>0&&setTimeout(s.hide,t.displayTime),s.should.show()?A.is(":visible")||s.show():s.hide()},destroy:function(){s.verbose("Destroying instance"),A.removeData(z).off(y),t.sticky&&C.off(y)},refresh:function(){s.debug("Refreshing cached calculations"),k=A.offset(),l=A.outerHeight(),m=C.outerWidth(),n=C.outerHeight(),o=C.offset()},show:function(){s.debug("Showing nag",t.animation.show),"fade"==t.animation.show?A.fadeIn(t.duration,t.easing):A.slideDown(t.duration,t.easing)},hide:function(){s.debug("Showing nag",t.animation.hide),"fade"==t.animation.show?A.fadeIn(t.duration,t.easing):A.slideUp(t.duration,t.easing)},onHide:function(){s.debug("Removing nag",t.animation.hide),A.remove(),t.onHide&&t.onHide()},stick:function(){if(s.refresh(),"fixed"==t.position){var a=b(window).prop("pageYOffset")||b(window).scrollTop(),c=A.hasClass(u.bottom)?o.top+(n-l)-a:o.top-a;A.css({position:"fixed",top:c,left:o.left,width:m-t.scrollBarWidth})}else A.css({top:q})},unStick:function(){A.css({top:""})},dismiss:function(a){t.storageMethod&&s.storage.set(t.storedKey,t.storedValue),s.hide(),a.stopImmediatePropagation(),a.preventDefault()},should:{show:function(){return t.persist?(s.debug("Persistent nag is set, can show nag"),!0):s.storage.get(t.storedKey)!=t.storedValue?(s.debug("Stored value is not set, can show nag",s.storage.get(t.storedKey)),!0):(s.debug("Stored value is set, cannot show nag",s.storage.get(t.storedKey)),!1)},stick:function(){return p=C.prop("pageYOffset")||C.scrollTop(),q=A.hasClass(u.bottom)?n-A.outerHeight()+p:p,q>k.top?!0:"fixed"==t.position?!0:!1}},storage:{set:function(a,c){s.debug("Setting stored value",a,c,t.storageMethod),"local"==t.storageMethod&&void 0!==window.store?window.store.set(a,c):void 0!==b.cookie?b.cookie(a,c):s.error(w.noStorage)},get:function(a){return s.debug("Getting stored value",a,t.storageMethod),"local"==t.storageMethod&&void 0!==window.store?window.store.get(a):void 0!==b.cookie?b.cookie(a):(s.error(w.noStorage),void 0)}},event:{scroll:function(){void 0!==r&&clearTimeout(r),r=setTimeout(function(){s.should.stick()?F(s.stick):s.unStick()},t.lag)}},setting:function(a,c){if(b.isPlainObject(a))b.extend(!0,t,a);else{if(void 0===c)return t[a];t[a]=c}},internal:function(a,c){return s.debug("Changing internal",a,c),void 0===c?s[a]:(b.isPlainObject(a)?b.extend(!0,s,a):s[a]=c,void 0)},debug:function(){t.debug&&(t.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,t.name+":"),s.debug.apply(console,arguments)))},verbose:function(){t.verbose&&t.debug&&(t.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,t.name+":"),s.verbose.apply(console,arguments)))},error:function(){s.error=Function.prototype.bind.call(console.error,console,t.name+":"),s.error.apply(console,arguments)},performance:{log:function(a){var b,c,d;t.performance&&(b=(new Date).getTime(),d=f||b,c=b-d,f=b,g.push({Element:D,Name:a[0],Arguments:[].slice.call(a,1)||"","Execution Time":c})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,100)},display:function(){var a=t.name+":",c=0;f=!1,clearTimeout(s.performance.timer),b.each(g,function(a,b){c+=b["Execution Time"]}),a+=" "+c+"ms",e&&(a+=" '"+e+"'"),d.size()>1&&(a+=" ("+d.size()+")"),(void 0!==console.group||void 0!==console.table)&&g.length>0&&(console.groupCollapsed(a),console.table?console.table(g):b.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),g=[]}},invoke:function(a,d,e){var f,g,h,i=E;return d=d||j,e=D||e,"string"==typeof a&&void 0!==i&&(a=a.split(/[\. ]/),f=a.length-1,b.each(a,function(c,d){var e=c!=f?d+a[c+1].charAt(0).toUpperCase()+a[c+1].slice(1):a;if(b.isPlainObject(i[e])&&c!=f)i=i[e];else{if(void 0!==i[e])return g=i[e],!1;if(!b.isPlainObject(i[d])||c==f)return void 0!==i[d]?(g=i[d],!1):!1;i=i[d]}})),b.isFunction(g)?h=g.apply(e,d):void 0!==g&&(h=g),b.isArray(c)?c.push(h):void 0!==c?c=[c,h]:void 0!==h&&(c=h),g}},i?(void 0===E&&s.initialize(),s.invoke(h)):(void 0!==E&&s.destroy(),s.initialize())}),void 0!==c?c:this},b.fn.nag.settings={name:"Nag",debug:!1,verbose:!0,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},position:"fixed",scrollBarWidth:18,storageMethod:"cookie",storedKey:"nag",storedValue:"dismiss",sticky:!1,lag:0,context:window,error:{noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".icon.close"},speed:500,easing:"easeOutQuad",onHide:function(){}}});
