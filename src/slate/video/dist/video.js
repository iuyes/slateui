define("slate/video/1.0.0/video",["$"],function(a){var b=a("$");b.fn.video=function(a){var c,d=b(this),e=d.selector||"",f=(new Date).getTime(),g=[],h=arguments[0],i="string"==typeof h,j=[].slice.call(arguments,1);return d.each(function(){var k,l=b.isPlainObject(a)?b.extend(!0,{},b.fn.video.settings,a):b.extend({},b.fn.video.settings),m=l.selector,n=l.className,o=l.error,p=l.metadata,q=l.namespace,r="."+q,s="module-"+q,t=b(this),u=t.find(m.placeholder),v=t.find(m.playButton),w=t.find(m.embed),x=this,y=t.data(s);k={initialize:function(){k.debug("Initializing video"),u.on("click"+r,k.play),v.on("click"+r,k.play),k.instantiate()},instantiate:function(){k.verbose("Storing instance of module",k),y=k,t.data(s,k)},destroy:function(){k.verbose("Destroying previous instance of video"),t.removeData(s).off(r),u.off(r),v.off(r)},change:function(a,b,c){k.debug("Changing video to ",a,b,c),t.data(p.source,a).data(p.id,b).data(p.url,c),l.onChange()},reset:function(){k.debug("Clearing video embed and showing placeholder"),t.removeClass(n.active),w.html(" "),u.show(),l.onReset()},play:function(){k.debug("Playing video");var a=t.data(p.source)||!1,b=t.data(p.url)||!1,c=t.data(p.id)||!1;w.html(k.generate.html(a,c,b)),t.addClass(n.active),l.onPlay()},generate:{html:function(a,b,c){k.debug("Generating embed html");var d,e="auto"==l.width?t.width():l.width,f="auto"==l.height?t.height():l.height;return a&&b?"vimeo"==a?d='<iframe src="http://player.vimeo.com/video/'+b+"?="+k.generate.url(a)+'"'+' width="'+e+'" height="'+f+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':"youtube"==a&&(d='<iframe src="http://www.youtube.com/embed/'+b+"?="+k.generate.url(a)+'"'+' width="'+e+'" height="'+f+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):c?d='<iframe src="'+c+'"'+' width="'+e+'" height="'+f+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':k.error(o.noVideo),d},url:function(a){var b=l.api?1:0,c=l.autoplay?1:0,d=l.hd?1:0,e=l.showUI?1:0,f=l.showUI?0:1,g="";return"vimeo"==a&&(g="api="+b+"&amp;title="+e+"&amp;byline="+e+"&amp;portrait="+e+"&amp;autoplay="+c,l.color&&(g+="&amp;color="+l.color)),"ustream"==a?(g="autoplay="+c,l.color&&(g+="&amp;color="+l.color)):"youtube"==a&&(g="enablejsapi="+b+"&amp;autoplay="+c+"&amp;autohide="+f+"&amp;hq="+d+"&amp;modestbranding=1",l.color&&(g+="&amp;color="+l.color)),g}},setting:function(a,c){if(b.isPlainObject(a))b.extend(!0,l,a);else{if(void 0===c)return l[a];l[a]=c}},internal:function(a,c){if(b.isPlainObject(a))b.extend(!0,k,a);else{if(void 0===c)return k[a];k[a]=c}},debug:function(){l.debug&&(l.performance?k.performance.log(arguments):(k.debug=Function.prototype.bind.call(console.info,console,l.name+":"),k.debug.apply(console,arguments)))},verbose:function(){l.verbose&&l.debug&&(l.performance?k.performance.log(arguments):(k.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),k.verbose.apply(console,arguments)))},error:function(){k.error=Function.prototype.bind.call(console.error,console,l.name+":"),k.error.apply(console,arguments)},performance:{log:function(a){var b,c,d;l.performance&&(b=(new Date).getTime(),d=f||b,c=b-d,f=b,g.push({Element:x,Name:a[0],Arguments:[].slice.call(a,1)||"","Execution Time":c})),clearTimeout(k.performance.timer),k.performance.timer=setTimeout(k.performance.display,100)},display:function(){var a=l.name+":",c=0;f=!1,clearTimeout(k.performance.timer),b.each(g,function(a,b){c+=b["Execution Time"]}),a+=" "+c+"ms",e&&(a+=" '"+e+"'"),d.size()>1&&(a+=" ("+d.size()+")"),(void 0!==console.group||void 0!==console.table)&&g.length>0&&(console.groupCollapsed(a),console.table?console.table(g):b.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),g=[]}},invoke:function(a,d,e){var f,g,h,i=y;return d=d||j,e=x||e,"string"==typeof a&&void 0!==i&&(a=a.split(/[\. ]/),f=a.length-1,b.each(a,function(c,d){var e=c!=f?d+a[c+1].charAt(0).toUpperCase()+a[c+1].slice(1):a;if(b.isPlainObject(i[e])&&c!=f)i=i[e];else{if(void 0!==i[e])return g=i[e],!1;if(!b.isPlainObject(i[d])||c==f)return void 0!==i[d]?(g=i[d],!1):!1;i=i[d]}})),b.isFunction(g)?h=g.apply(e,d):void 0!==g&&(h=g),b.isArray(c)?c.push(h):void 0!==c?c=[c,h]:void 0!==h&&(c=h),g}},i?(void 0===y&&k.initialize(),k.invoke(h)):(void 0!==y&&k.destroy(),k.initialize())}),void 0!==c?c:this},b.fn.video.settings={name:"Video",namespace:"video",debug:!1,verbose:!0,performance:!0,metadata:{source:"source",id:"id",url:"url"},onPlay:function(){},onReset:function(){},onChange:function(){},onPause:function(){},onStop:function(){},width:"auto",height:"auto",autoplay:!1,color:"#442359",hd:!0,showUI:!1,api:!0,error:{noVideo:"No video specified",method:"The method you called is not defined"},className:{active:"active"},selector:{embed:".embed",placeholder:".placeholder",playButton:".play"}}});
