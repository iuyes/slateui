define("slate/tab/1.0.0/tab",["$"],function(a){var b=a("$");b.fn.tab=function(a){var c,d,e,f,g,h=b.extend(!0,{},b.fn.tab.settings,a),i=b(this),j=b(h.context).find(h.selector.tabs),k=i.selector||"",l={},m=!0,n=0,o=this,p=(new Date).getTime(),q=[],r=h.className,s=h.metadata,t=h.error,u="."+h.namespace,v="module-"+h.namespace,w=i.data(v),x=arguments[0],y=void 0!==w&&"string"==typeof x,z=[].slice.call(arguments,1);return f={initialize:function(){if(f.debug("Initializing Tabs",i),h.auto&&(f.verbose("Setting up automatic tab retrieval from server"),h.apiSettings={url:h.path+"/{$tab}"}),h.history){if(f.debug("Initializing page state"),void 0===b.address)return f.error(t.state),!1;if("hash"==h.historyType&&f.debug("Using hash state change to manage state"),"html5"==h.historyType){if(f.debug("Using HTML5 to manage state"),h.path===!1)return f.error(t.path),!1;b.address.history(!0).state(h.path)}b.address.unbind("change").bind("change",f.event.history.change)}b.isWindow(o)||(f.debug("Attaching tab activation events to element",i),i.on("click"+u,f.event.click)),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),i.data(v,f)},destroy:function(){f.debug("Destroying tabs",i),i.removeData(v).off(u)},event:{click:function(a){var c=b(this).data(s.tab);void 0!==c?(h.history?(f.verbose("Updating page state",a),b.address.value(c)):(f.verbose("Changing tab without state management",a),f.changeTab(c)),a.preventDefault()):f.debug("No tab specified")},history:{change:function(a){var c=a.pathNames.join("/")||f.get.initialPath(),d=h.templates.determineTitle(c)||!1;f.debug("History change event",c,a),e=a,void 0!==c&&f.changeTab(c),d&&b.address.title(d)}}},refresh:function(){c&&(f.debug("Refreshing tab",c),f.changeTab(c))},cache:{read:function(a){return void 0!==a?l[a]:!1},add:function(a,b){a=a||c,f.debug("Adding cached content for",a),l[a]=b},remove:function(a){a=a||c,f.debug("Removing cached content for",a),delete l[a]}},set:{state:function(a){b.address.value(a)}},changeTab:function(a){var g=window.history&&window.history.pushState,i=g&&h.ignoreFirstLoad&&m,j=h.auto||b.isPlainObject(h.apiSettings),k=j&&!i?f.utilities.pathToArray(a):f.get.defaultPathArray(a);a=f.utilities.arrayToPath(k),f.deactivate.all(),b.each(k,function(g,l){var n,o,p,q=k.slice(0,g+1),r=f.utilities.arrayToPath(q),s=f.is.tab(r),u=g+1==k.length,v=f.get.tabElement(r);return f.verbose("Looking for tab",l),s?(f.verbose("Tab was found",l),c=r,d=f.utilities.filterArray(k,q),u?p=!0:(n=k.slice(0,g+2),o=f.utilities.arrayToPath(n),p=!f.is.tab(o),p&&f.verbose("Tab parameters found",n)),p&&j?(i?(f.debug("Ignoring remote content on first tab load",r),m=!1,f.cache.add(a,v.html()),f.activate.all(r),b.proxy(h.onTabInit,v)(r,d,e),b.proxy(h.onTabLoad,v)(r,d,e)):(f.activate.navigation(r),f.content.fetch(r,a)),!1):(f.debug("Opened local tab",r),f.activate.all(r),f.cache.read(r)||(f.cache.add(r,!0),f.debug("First time tab loaded calling tab init"),b.proxy(h.onTabInit,v)(r,d,e)),b.proxy(h.onTabLoad,v)(r,d,e),void 0)):(f.error(t.missingTab,l),!1)})},content:{fetch:function(a,g){var i,j,k=f.get.tabElement(a),l={dataType:"html",stateContext:k,success:function(i){f.cache.add(g,i),f.content.update(a,i),a==c?(f.debug("Content loaded",a),f.activate.tab(a)):f.debug("Content loaded in background",a),b.proxy(h.onTabInit,k)(a,d,e),b.proxy(h.onTabLoad,k)(a,d,e)},urlData:{tab:g}},m=k.data(s.promise)||!1,n=m&&"pending"===m.state();g=g||a,j=f.cache.read(g),h.cache&&j?(f.debug("Showing existing content",g),f.content.update(a,j),f.activate.tab(a),b.proxy(h.onTabLoad,k)(a,d,e)):n?(f.debug("Content is already loading",g),k.addClass(r.loading)):void 0!==b.api?(console.log(h.apiSettings),i=b.extend(!0,{headers:{"X-Remote":!0}},h.apiSettings,l),f.debug("Retrieving remote content",g,i),b.api(i)):f.error(t.api)},update:function(a,b){f.debug("Updating html for",a);var c=f.get.tabElement(a);c.html(b)}},activate:{all:function(a){f.activate.tab(a),f.activate.navigation(a)},tab:function(a){var b=f.get.tabElement(a);f.verbose("Showing tab content for",b),b.addClass(r.active)},navigation:function(a){var b=f.get.navElement(a);f.verbose("Activating tab navigation for",b,a),b.addClass(r.active)}},deactivate:{all:function(){f.deactivate.navigation(),f.deactivate.tabs()},navigation:function(){i.removeClass(r.active)},tabs:function(){j.removeClass(r.active+" "+r.loading)}},is:{tab:function(a){return void 0!==a?f.get.tabElement(a).size()>0:!1}},get:{initialPath:function(){return i.eq(0).data(s.tab)||j.eq(0).data(s.tab)},path:function(){return b.address.value()},defaultPathArray:function(a){return f.utilities.pathToArray(f.get.defaultPath(a))},defaultPath:function(a){var b=i.filter("[data-"+s.tab+'^="'+a+'/"]').eq(0),c=b.data(s.tab)||!1;if(c){if(f.debug("Found default tab",c),n<h.maxDepth)return n++,f.get.defaultPath(c);f.error(t.recursion)}else f.debug("No default tabs found for",a,j);return n=0,a},navElement:function(a){return a=a||c,i.filter("[data-"+s.tab+'="'+a+'"]')},tabElement:function(a){var b,d,e,g;return a=a||c,e=f.utilities.pathToArray(a),g=f.utilities.last(e),b=j.filter("[data-"+s.tab+'="'+g+'"]'),d=j.filter("[data-"+s.tab+'="'+a+'"]'),b.size()>0?b:d},tab:function(){return c}},utilities:{filterArray:function(a,c){return b.grep(a,function(a){return-1==b.inArray(a,c)})},last:function(a){return b.isArray(a)?a[a.length-1]:!1},pathToArray:function(a){return void 0===a&&(a=c),"string"==typeof a?a.split("/"):[a]},arrayToPath:function(a){return b.isArray(a)?a.join("/"):!1}},setting:function(a,c){if(b.isPlainObject(a))b.extend(!0,h,a);else{if(void 0===c)return h[a];h[a]=c}},internal:function(a,c){if(b.isPlainObject(a))b.extend(!0,f,a);else{if(void 0===c)return f[a];f[a]=c}},debug:function(){h.debug&&(h.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,h.name+":"),f.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),f.verbose.apply(console,arguments)))},error:function(){f.error=Function.prototype.bind.call(console.error,console,h.name+":"),f.error.apply(console,arguments)},performance:{log:function(a){var b,c,d;h.performance&&(b=(new Date).getTime(),d=p||b,c=b-d,p=b,q.push({Element:o,Name:a[0],Arguments:[].slice.call(a,1)||"","Execution Time":c})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,100)},display:function(){var a=h.name+":",c=0;p=!1,clearTimeout(f.performance.timer),b.each(q,function(a,b){c+=b["Execution Time"]}),a+=" "+c+"ms",k&&(a+=" '"+k+"'"),(void 0!==console.group||void 0!==console.table)&&q.length>0&&(console.groupCollapsed(a),console.table?console.table(q):b.each(q,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),q=[]}},invoke:function(a,c,d){var e,f,h,i=w;return c=c||z,d=o||d,"string"==typeof a&&void 0!==i&&(a=a.split(/[\. ]/),e=a.length-1,b.each(a,function(c,d){var g=c!=e?d+a[c+1].charAt(0).toUpperCase()+a[c+1].slice(1):a;if(b.isPlainObject(i[g])&&c!=e)i=i[g];else{if(void 0!==i[g])return f=i[g],!1;if(!b.isPlainObject(i[d])||c==e)return void 0!==i[d]?(f=i[d],!1):!1;i=i[d]}})),b.isFunction(f)?h=f.apply(d,c):void 0!==f&&(h=f),b.isArray(g)?g.push(h):void 0!==g?g=[g,h]:void 0!==h&&(g=h),f}},y?(void 0===w&&f.initialize(),f.invoke(x)):(void 0!==w&&f.destroy(),f.initialize()),void 0!==g?g:this},b.tab=function(a){b(window).tab(a)},b.fn.tab.settings={name:"Tab",debug:!1,verbose:!0,performance:!0,namespace:"tab",onTabInit:function(){},onTabLoad:function(){},templates:{determineTitle:function(){}},auto:!1,history:!0,historyType:"hash",path:!1,context:"body",maxDepth:25,ignoreFirstLoad:!1,alwaysRefresh:!1,cache:!0,apiSettings:!1,error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Tab cannot be found",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",state:"The state library has not been initialized"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab"}}});
